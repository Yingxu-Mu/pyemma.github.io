<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Ant Cheat Sheet</title><meta name="twitter:card" content="summary" /><meta name="twitter:site" content="@pyemma" /><meta name="twitter:title" content="Ant Cheat Sheet" /><meta name="twitter:description" content="This is a simple document introducing how to write the build.xml of Ant for your projects."><meta name="description" content="This is a simple document introducing how to write the build.xml of Ant for your projects."><link rel="icon" href="/assets/favicon.png"><link rel="apple-touch-icon" href="/assets/touch-icon.png"><link rel="stylesheet" href="//code.cdn.mozilla.net/fonts/fira.css"><link rel="stylesheet" href="/assets/core.css"><link rel="canonical" href="/notes/ant-cheat-sheet"><link rel="alternate" type="application/atom+xml" title="Move Fast and Be Bold" href="/feed.xml" /> <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></head><body><aside class="logo"> <a href="/"> <img src="http://www.gravatar.com/avatar/483a9a64afff77f3c3d40c89212ec7bc.png?s=80" class="gravatar"> </a> <span class="logo-prompt">Back to Home</span></aside><main> <noscript><style> article .footnotes { display: block; }</style></noscript><article><div class="center"><h1>Ant Cheat Sheet</h1><time>November 1, 2015</time></div><div class="divider"></div><p>This is a simple document introducing how to write the build.xml of Ant for your projects.</p><p>Each Ant build.xml has a <code>&lt;project&gt;</code> element as the root element, this element can have a <code>name</code> attribute, which specify the name of this project; a <code>basedir</code> element, which determines the root path during the sequential path calculation, a <code>default</code> element, which is the default <code>target</code> to run.</p><p>Each <code>&lt;project&gt;</code> can be constructed with several <code>&lt;target&gt;</code>, <code>&lt;target&gt;</code> can be think of as each state of our application. For example, in my project, I need to first create several dictionaries, and then compile some java class, and encapsulate the compiled class into jar file, and then run some test. All these can be regarded as individual <code>&lt;target&gt;</code>. <code>&lt;target&gt;</code> also has <code>name</code> attribute and it can also be specified with <code>depends</code> attribute which is other <code>&lt;target&gt;</code> that this depends on.</p><p>Each <code>&lt;target&gt;</code> is composed of several <code>task</code>. The <code>task</code> is in the format like <code>&lt;task_name attr1=val1 attr2=val2 /&gt;</code>. Several <code>task</code> that I have used is</p><ul><li><strong>mkdir</strong>: create dictionaries</li><li><strong>delete</strong>: delete a file or a dictionary</li><li><strong>javac</strong>: used to comple java class file</li><li><strong>java</strong>: run java class</li><li><strong>jar</strong>: create jar file</li><li><strong>exec</strong>: run a executable binary file</li></ul><p>Sometimes, we need the same value multiple times in different places, like the name of dictionaries. We can use <code>&lt;property&gt;</code> to hold this value and use the <code>&lt;property&gt;</code> in other place. For example, <code>&lt;property name="build.dir" value="build" /&gt;</code>, then we can use it like <code>&lt;java srcdir="${src.dir}" dstdir="${build.dir}" /&gt;</code>.</p><p>When compile or run java class, we sometimes need external libraries, we can use <code>&lt;path&gt;</code> or <code>&lt;classpath&gt;</code> to hold them. For example</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;path</span> <span class="na">id=</span><span class="s">&quot;classpath&quot;</span><span class="nt">&gt;</span>
	<span class="nt">&lt;pathelement</span> <span class="na">path=</span><span class="s">&quot;${classpath}&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">&quot;${lib.dir}&quot;</span> <span class="na">includes=</span><span class="s">&quot;**/*.jar&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/path&gt;</span></code></pre></figure><p>Here we assigned an id to this <code>&lt;path&gt;</code> element, we can later reference this id. And there can be multiple <code>&lt;pathelement&gt;</code>, the <code>path</code> attribute is usually used with predefined path and <code>location</code> specify a path relative to the base path.</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;run&quot;</span> <span class="na">depends=</span><span class="s">&quot;jar&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;java</span> <span class="na">fork=</span><span class="s">&quot;true&quot;</span> <span class="na">classname=</span><span class="s">&quot;${main-class}&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;classpath&gt;</span>
            <span class="nt">&lt;path</span> <span class="na">refid=</span><span class="s">&quot;classpath&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;path</span> <span class="na">location=</span><span class="s">&quot;${jar.dir}/${ant.project.name}.jar&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/classpath&gt;</span>
    <span class="nt">&lt;/java&gt;</span>
<span class="nt">&lt;/target&gt;</span></code></pre></figure><p>We can use <code>&lt;echo&gt;</code> in <code>&lt;target&gt;</code> to output some information.</p><blockquote><p>Useful link: <a href="https://ant.apache.org/manual/">Ant manual</a></p></blockquote></article><div class="back"> <a href="/">Back</a></div></main></body></html>